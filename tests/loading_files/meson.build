test_exe = executable('loading_file_test',
  'test.cpp',
  files(
    src_dir / 'fileio/file_loading.cpp',
    src_dir / 'log/log.cpp',
  ),
  dependencies: [
    icu_uc,
    icu_io,
    icu_i18n
  ],
  include_directories : include,
)

testFiles = files('normaltest.txt', 'emojitest.txt', 'multilingualtest.txt')
testInput = [
  'This is the contents of the orb file !!!',
  'Hello i am a smiley face: "ğŸ˜Š", time for emoji spam?? ğŸ’€ğŸºğŸ˜­ğŸ˜â¤ï¸ğŸ˜˜ğŸ¤©ğŸ˜¶ğŸ•ğŸ³ğŸ¥¨ğŸğŸ”',
  'æˆ‘æƒ³çŸ¥é“é€™å€‹æ¸¬è©¦æ˜¯å¦æœƒé€šé? Â¡Ah, sÃ­, algunos personajes raros espaÃ±oles! Â¿papÃ¡? Tid til dansk! Ã†Ã˜Ã… Ã¦Ã¸Ã¥ Ã«Ã¿Ã¼Ã¯Ã¶Ã¤ ÃªÃ»Ã®Ã´Ã¢ Ã± Ã‹ÃœÃÃ–Ã„ ÃŠÃ›ÃÃ”Ã‚ ãŠã¾ãˆã¯ã‚‚ã†ã€æ­»ã‚“ã§ã„ã‚‹!ä½•? à½¦à½´à½¦à¼‹à½€à¾±à½„à¼‹à½¨à½²à½¦à½²à¼‹à½”à½ºà¼‹à½“à½²à½¤à¼‹à½à½²à½–à¼‹à½–à½¤à½ºà½¢à¼‹à½‚à¾±à½²à¼‹à½¢à½ºà¼‹à½–à¼‹à½˜à½ºà½‘à¼',
]

testArgs = []
foreach idx : range(testFiles.length())
  testArgs += [[testFiles[idx], testInput[idx]]]
endforeach

foreach testArg : testArgs
  test('loading_files', test_exe, args: testArg)
endforeach
